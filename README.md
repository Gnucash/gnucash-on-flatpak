# Build environment to build a flatpak version of GnuCash #

This repository contains code to allow building a flatpak version of GnuCash.

Again: these packages are not release quality for several reasons:

1. They will contain features that have not been released yet and that
   may or may not have been thoroughly tested, or may not even be complete
   just yet.

2. The script that builds these packages does not use the same source tar ball
   as the releases do. Releases start from a tar ball generated by running
   make dist(check) on the source repository.

However, now that it's clearly stated the packages are meant purely for
testing unreleased features, here's how to use these scripts.

1. Create the following directory structure
```
flatpak
flatpak/src
```

2. Navigate into flatpak/src
```
cd flatpak/src
```

3. Clone this repo:
```
git clone https://github.com/Gnucash/gnucash-on-flatpak gnucash-on-flatpak.git
```

4. Clone the gnucash repo
```
git clone https://github.com/Gnucash/gnucash gnucash.git
```

5. Clone the gnucash-docs repo
```
git clone https://github.com/Gnucash/gnucash-docs gnucash-docs.git
```

6. If needed copy custom.sh-sample to custom.sh and override the variables
   found in there are desired/needed (for example if your repos are in 
   another location than default, or using non-default names/branches).

7. Navigate into root directory
```
cd ..
```

8. Build the application using the following command and add the fresh build into a local flatpak repository
```
flatpak-builder --repo=repo --force-clean build src/gnucash-on-flatpak.git/org.gnucash.GnuCash.json

## Notes ##

* The script will only build the packages if there are changes in the source
  repositories since the last build.

## TODO ##
- complete instructions as the code evolves
- goal is to make a wrapper around flatpak-builder that will automatically trigger
  new builds only when any of the source repos changes
- finance::quote support is missing still


